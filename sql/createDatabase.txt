CREATE DATABASE EMP;

USE EMP;

CREATE TABLE DEPARTAMENTO (
   DNOME VARCHAR(30),
   DNUMERO INT NOT NULL,
   GERSSN INT,
   GERDATAINICIO DATE,
   PRIMARY KEY (DNUMERO)
);

CREATE TABLE EMPREGADO (
   PNOME VARCHAR(30),
   MINICIAL VARCHAR(1),
   UNOME VARCHAR(30),
   SSN INT NOT NULL,
   DATANASC DATE,
   ENDERECO VARCHAR(100),
   SEXO VARCHAR(1),
   SALARIO FLOAT,
   SUPERSSN INT,
   DNO INT,
   PRIMARY KEY (SSN),
   FOREIGN KEY (SUPERSSN) REFERENCES EMPREGADO (SSN),
   FOREIGN KEY (DNO) REFERENCES DEPARTAMENTO (DNUMERO)
);

CREATE TABLE DEPT_LOCALIZACOES (
   DNUMERO INT NOT NULL,
   DLOCALIZACAO VARCHAR(30),
   PRIMARY KEY (DNUMERO,DLOCALIZACAO),
   FOREIGN KEY (DNUMERO) REFERENCES DEPARTAMENTO (DNUMERO)
);

CREATE TABLE PROJETO (
   PJNOME VARCHAR(30),
   PNUMERO INT NOT NULL,
   PLOCALIZACAO VARCHAR(30),
   DNUM INT,
   PRIMARY KEY (PNUMERO),
   FOREIGN KEY (DNUM) REFERENCES DEPARTAMENTO (DNUMERO)
);

CREATE TABLE TRABALHA_EM (
   ESSN INT NOT NULL,
   PNO INT NOT NULL,
   HORAS FLOAT,
   PRIMARY KEY (ESSN,PNO),
   FOREIGN KEY (ESSN) REFERENCES EMPREGADO (SSN),
   FOREIGN KEY (PNO) REFERENCES PROJETO (PNUMERO)
);

CREATE TABLE DEPENDENTE (
   ESSN INT NOT NULL,
   NOME_DEPENDENTE VARCHAR(30) NOT NULL,
   SEXO VARCHAR(1),
   DATANASC DATE,
   PARENTESCO VARCHAR(30),
   PRIMARY KEY (ESSN, NOME_DEPENDENTE),
   FOREIGN KEY (ESSN) REFERENCES EMPREGADO (SSN)
);
